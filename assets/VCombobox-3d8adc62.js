import{m as xe,b as Ce,u as ke,c as we,d as Se,e as Ie,V as Ae}from"./filter-2c7165d1.js";import{p as Fe,aO as De,be as Pe,e as _e,g as Re,h as Me,Z as U,B as E,aA as ee,D as w,i as Te,bf as Ee,ay as N,l as Le,an as oe,o,L as B,q as L,ac as Oe,V as ie,bg as Ne,ad as Ue,P as Be,bh as Ke,bi as $e,aY as ze,bj as Ve,ah as se,bk as He,bl as Ye}from"./index-4779d971.js";import{u as je,V as qe,a as ce,t as ue}from"./VList-799d58f5.js";import{V as We}from"./VCheckboxBtn-f51645e7.js";function Ze(e,p,s){if(p==null)return e;if(Array.isArray(p))throw new Error("Multiple matches is not implemented");return typeof p=="number"&&~p?o(B,null,[o("span",{class:"v-autocomplete__unmask"},[e.substr(0,p)]),o("span",{class:"v-autocomplete__mask"},[e.substr(p,s)]),o("span",{class:"v-autocomplete__unmask"},[e.substr(p+s)])]):e}const Ge=Fe({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:Boolean,search:String,...xe({filterKeys:["title"]}),...Ce(),...De(Pe({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),..._e({transition:!1})},"VAutocomplete"),al=Re()({name:"VAutocomplete",props:Ge(),emits:{"update:focused":e=>!0,"update:search":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,p){let{slots:s}=p;const{t:r}=Me(),I=U(),V=E(!1),x=E(!0),F=E(!1),K=U(),G=U(),j=ee(e,"menu"),b=w({get:()=>j.value,set:t=>{var c;j.value&&!t&&((c=K.value)!=null&&c.ΨopenChildren)||(j.value=t)}}),i=E(-1),g=w(()=>{var t;return(t=I.value)==null?void 0:t.color}),q=w(()=>b.value?e.closeText:e.openText),{items:le,transformIn:te,transformOut:re}=je(e),{textColorClasses:ve,textColorStyles:de}=Te(g),C=ee(e,"search",""),m=ee(e,"modelValue",[],t=>te(t===null?[null]:ze(t)),t=>{const c=re(t);return e.multiple?c:c[0]??null}),d=w(()=>typeof e.counterValue=="function"?e.counterValue(m.value):typeof e.counterValue=="number"?e.counterValue:m.value.length),D=Ee(),{filteredItems:R,getMatches:k}=ke(e,le,()=>x.value?"":C.value),P=w(()=>e.hideSelected?R.value.filter(t=>!m.value.some(c=>c.value===t.value)):R.value),W=w(()=>m.value.map(t=>t.props.value)),Y=w(()=>{var c;return(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&C.value===((c=P.value[0])==null?void 0:c.title))&&P.value.length>0&&!x.value&&!F.value}),A=w(()=>e.hideNoData&&!P.value.length||e.readonly||(D==null?void 0:D.isReadonly.value)),J=U(),{onListScroll:Z,onListKeydown:Q}=we(J,I);function X(t){e.openOnClear&&(b.value=!0),C.value=""}function fe(){A.value||(b.value=!0)}function me(t){A.value||(V.value&&(t.preventDefault(),t.stopPropagation()),b.value=!b.value)}function he(t){var u,n,v;if(e.readonly||D!=null&&D.isReadonly.value)return;const c=I.value.selectionStart,l=m.value.length;if((i.value>-1||["Enter","ArrowDown","ArrowUp"].includes(t.key))&&t.preventDefault(),["Enter","ArrowDown"].includes(t.key)&&(b.value=!0),["Escape"].includes(t.key)&&(b.value=!1),Y.value&&["Enter","Tab"].includes(t.key)&&O(P.value[0]),t.key==="ArrowDown"&&Y.value&&((u=J.value)==null||u.focus("next")),!!e.multiple){if(["Backspace","Delete"].includes(t.key)){if(i.value<0){t.key==="Backspace"&&!C.value&&(i.value=l-1);return}const a=i.value,f=m.value[i.value];f&&!f.props.disabled&&O(f),i.value=a>=l-1?l-2:a}if(t.key==="ArrowLeft"){if(i.value<0&&c>0)return;const a=i.value>-1?i.value-1:l-1;m.value[a]?i.value=a:(i.value=-1,I.value.setSelectionRange((n=C.value)==null?void 0:n.length,(v=C.value)==null?void 0:v.length))}if(t.key==="ArrowRight"){if(i.value<0)return;const a=i.value+1;m.value[a]?i.value=a:(i.value=-1,I.value.setSelectionRange(0,0))}}}function ge(t){if(Ve(I.value,":autofill")||Ve(I.value,":-webkit-autofill")){const c=le.value.find(l=>l.title===t.target.value);c&&O(c)}}function be(){var t;V.value&&(x.value=!0,(t=I.value)==null||t.focus())}function ye(t){V.value=!0,setTimeout(()=>{F.value=!0})}function pe(t){F.value=!1}function _(t){(t==null||t===""&&!e.multiple)&&(m.value=[])}const $=E(!1);function O(t){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!t.props.disabled)if(e.multiple){const l=m.value.findIndex(u=>e.valueComparator(u.value,t.value));if(l===-1)m.value=[...m.value,t];else{const u=[...m.value];u.splice(l,1),m.value=u}e.clearOnSelect&&(C.value="")}else m.value=c?[t]:[],$.value=!0,C.value=c?t.title:"",b.value=!1,x.value=!0,se(()=>$.value=!1)}return N(V,(t,c)=>{var l;t!==c&&(t?($.value=!0,C.value=e.multiple?"":String(((l=m.value.at(-1))==null?void 0:l.props.title)??""),x.value=!0,se(()=>$.value=!1)):(!e.multiple&&C.value==null?m.value=[]:Y.value&&!F.value&&!m.value.some(u=>{let{value:n}=u;return n===P.value[0].value})&&O(P.value[0]),b.value=!1,C.value="",i.value=-1))}),N(C,t=>{!V.value||$.value||(t&&(b.value=!0),x.value=!t)}),N(b,()=>{if(!e.hideSelected&&b.value&&m.value.length){const t=P.value.findIndex(c=>m.value.some(l=>c.value===l.value));He&&window.requestAnimationFrame(()=>{var c;t>=0&&((c=G.value)==null||c.scrollToIndex(t))})}}),N(P,(t,c)=>{V.value&&(!t.length&&e.hideNoData&&(b.value=!1),!c.length&&t.length&&(b.value=!0))}),Le(()=>{const t=!!(e.chips||s.chip),c=!!(!e.hideNoData||P.value.length||s["prepend-item"]||s["append-item"]||s["no-data"]),l=m.value.length>0,u=oe.filterProps(e);return o(oe,L({ref:I},u,{modelValue:C.value,"onUpdate:modelValue":[n=>C.value=n,_],focused:V.value,"onUpdate:focused":n=>V.value=n,validationValue:m.externalValue,counterValue:d.value,dirty:l,onChange:ge,class:["v-autocomplete",`v-autocomplete--${e.multiple?"multiple":"single"}`,{"v-autocomplete--active-menu":b.value,"v-autocomplete--chips":!!e.chips,"v-autocomplete--selection-slot":!!s.selection,"v-autocomplete--selecting-index":i.value>-1},e.class],style:e.style,readonly:e.readonly,placeholder:l?void 0:e.placeholder,"onClick:clear":X,"onMousedown:control":fe,onKeydown:he}),{...s,default:()=>o(B,null,[o(Se,L({ref:K,modelValue:b.value,"onUpdate:modelValue":n=>b.value=n,activator:"parent",contentClass:"v-autocomplete__content",disabled:A.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:be},e.menuProps),{default:()=>[c&&o(qe,L({ref:J,selected:W.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:n=>n.preventDefault(),onKeydown:Q,onFocusin:ye,onFocusout:pe,onScrollPassive:Z,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},e.listProps),{default:()=>{var n,v,a;return[(n=s["prepend-item"])==null?void 0:n.call(s),!P.value.length&&!e.hideNoData&&(((v=s["no-data"])==null?void 0:v.call(s))??o(ce,{title:r(e.noDataText)},null)),o(Ie,{ref:G,renderless:!0,items:P.value},{default:f=>{var T;let{item:h,index:S,itemRef:y}=f;const M=L(h.props,{ref:y,key:S,active:Y.value&&S===0?!0:void 0,onClick:()=>O(h)});return((T=s.item)==null?void 0:T.call(s,{item:h,index:S,props:M}))??o(ce,M,{prepend:z=>{let{isSelected:H}=z;return o(B,null,[e.multiple&&!e.hideSelected?o(We,{key:h.value,modelValue:H,ripple:!1,tabindex:"-1"},null):void 0,h.props.prependAvatar&&o(Oe,{image:h.props.prependAvatar},null),h.props.prependIcon&&o(ie,{icon:h.props.prependIcon},null)])},title:()=>{var z,H;return x.value?h.title:Ze(h.title,(z=k(h))==null?void 0:z.title,((H=C.value)==null?void 0:H.length)??0)}})}}),(a=s["append-item"])==null?void 0:a.call(s)]}})]}),m.value.map((n,v)=>{function a(y){y.stopPropagation(),y.preventDefault(),O(n,!1)}const f={"onClick:close":a,onMousedown(y){y.preventDefault(),y.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},h=t?!!s.chip:!!s.selection,S=h?Ne(t?s.chip({item:n,index:v,props:f}):s.selection({item:n,index:v})):void 0;if(!(h&&!S))return o("div",{key:n.value,class:["v-autocomplete__selection",v===i.value&&["v-autocomplete__selection--selected",ve.value]],style:v===i.value?de.value:{}},[t?s.chip?o(Ue,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:n.title}}},{default:()=>[S]}):o(Ae,L({key:"chip",closable:e.closableChips,size:"small",text:n.title,disabled:n.props.disabled},f),null):S??o("span",{class:"v-autocomplete__selection-text"},[n.title,e.multiple&&v<m.value.length-1&&o("span",{class:"v-autocomplete__selection-comma"},[Be(",")])])])})]),"append-inner":function(){var f;for(var n=arguments.length,v=new Array(n),a=0;a<n;a++)v[a]=arguments[a];return o(B,null,[(f=s["append-inner"])==null?void 0:f.call(s,...v),e.menuIcon?o(ie,{class:"v-autocomplete__menu-icon",icon:e.menuIcon,onMousedown:me,onClick:Ke,"aria-label":r(q.value),title:r(q.value)},null):void 0])}})}),$e({isFocused:V,isPristine:x,menu:b,search:C,filteredItems:R,select:O},I)}});function Je(e,p,s){if(p==null)return e;if(Array.isArray(p))throw new Error("Multiple matches is not implemented");return typeof p=="number"&&~p?o(B,null,[o("span",{class:"v-combobox__unmask"},[e.substr(0,p)]),o("span",{class:"v-combobox__mask"},[e.substr(p,s)]),o("span",{class:"v-combobox__unmask"},[e.substr(p+s)])]):e}const Qe=Fe({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:{type:Boolean,default:!0},delimiters:Array,...xe({filterKeys:["title"]}),...Ce({hideNoData:!0,returnObject:!0}),...De(Pe({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),..._e({transition:!1})},"VCombobox"),nl=Re()({name:"VCombobox",props:Qe(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:search":e=>!0,"update:menu":e=>!0},setup(e,p){var c;let{emit:s,slots:r}=p;const{t:I}=Me(),V=U(),x=E(!1),F=E(!0),K=E(!1),G=U(),j=U(),b=ee(e,"menu"),i=w({get:()=>b.value,set:l=>{var u;b.value&&!l&&((u=G.value)!=null&&u.ΨopenChildren)||(b.value=l)}}),g=E(-1);let q=!1;const le=w(()=>{var l;return(l=V.value)==null?void 0:l.color}),te=w(()=>i.value?e.closeText:e.openText),{items:re,transformIn:ve,transformOut:de}=je(e),{textColorClasses:C,textColorStyles:m}=Te(le),d=ee(e,"modelValue",[],l=>ve(ze(l)),l=>{const u=de(l);return e.multiple?u:u[0]??null}),D=Ee(),R=E(e.multiple?"":((c=d.value[0])==null?void 0:c.title)??""),k=w({get:()=>R.value,set:l=>{var u;if(R.value=l??"",e.multiple||(d.value=[ue(e,l)]),l&&e.multiple&&((u=e.delimiters)!=null&&u.length)){const n=l.split(new RegExp(`(?:${e.delimiters.join("|")})+`));n.length>1&&(n.forEach(v=>{v=v.trim(),v&&_(ue(e,v))}),R.value="")}l||(g.value=-1),F.value=!l}}),P=w(()=>typeof e.counterValue=="function"?e.counterValue(d.value):typeof e.counterValue=="number"?e.counterValue:e.multiple?d.value.length:k.value.length);N(R,l=>{q?se(()=>q=!1):x.value&&!i.value&&(i.value=!0),s("update:search",l)}),N(d,l=>{var u;e.multiple||(R.value=((u=l[0])==null?void 0:u.title)??"")});const{filteredItems:W,getMatches:Y}=ke(e,re,()=>F.value?"":k.value),A=w(()=>e.hideSelected?W.value.filter(l=>!d.value.some(u=>u.value===l.value)):W.value),J=w(()=>d.value.map(l=>l.value)),Z=w(()=>{var u;return(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&k.value===((u=A.value[0])==null?void 0:u.title))&&A.value.length>0&&!F.value&&!K.value}),Q=w(()=>e.hideNoData&&!A.value.length||e.readonly||(D==null?void 0:D.isReadonly.value)),X=U(),{onListScroll:fe,onListKeydown:me}=we(X,V);function he(l){q=!0,e.openOnClear&&(i.value=!0)}function ge(){Q.value||(i.value=!0)}function be(l){Q.value||(x.value&&(l.preventDefault(),l.stopPropagation()),i.value=!i.value)}function ye(l){var v;if(Ye(l)||e.readonly||D!=null&&D.isReadonly.value)return;const u=V.value.selectionStart,n=d.value.length;if((g.value>-1||["Enter","ArrowDown","ArrowUp"].includes(l.key))&&l.preventDefault(),["Enter","ArrowDown"].includes(l.key)&&(i.value=!0),["Escape"].includes(l.key)&&(i.value=!1),["Enter","Escape","Tab"].includes(l.key)&&(Z.value&&["Enter","Tab"].includes(l.key)&&_(W.value[0]),F.value=!0),l.key==="ArrowDown"&&Z.value&&((v=X.value)==null||v.focus("next")),!!e.multiple){if(["Backspace","Delete"].includes(l.key)){if(g.value<0){l.key==="Backspace"&&!k.value&&(g.value=n-1);return}const a=g.value,f=d.value[g.value];f&&!f.props.disabled&&_(f,!1),g.value=a>=n-1?n-2:a}if(l.key==="ArrowLeft"){if(g.value<0&&u>0)return;const a=g.value>-1?g.value-1:n-1;d.value[a]?g.value=a:(g.value=-1,V.value.setSelectionRange(k.value.length,k.value.length))}if(l.key==="ArrowRight"){if(g.value<0)return;const a=g.value+1;d.value[a]?g.value=a:(g.value=-1,V.value.setSelectionRange(0,0))}l.key==="Enter"&&k.value&&(_(ue(e,k.value)),k.value="")}}function pe(){var l;x.value&&(F.value=!0,(l=V.value)==null||l.focus())}function _(l){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.multiple){const n=d.value.findIndex(a=>e.valueComparator(a.value,l.value)),v=u??!~n;if(~n){const a=v?[...d.value,l]:[...d.value];a.splice(n,1),d.value=a}else v&&(d.value=[...d.value,l]);e.clearOnSelect&&(k.value="")}else{const n=u!==!1;d.value=n?[l]:[],R.value=n?l.title:"",se(()=>{i.value=!1,F.value=!0})}}function $(l){x.value=!0,setTimeout(()=>{K.value=!0})}function O(l){K.value=!1}function t(l){(l==null||l===""&&!e.multiple)&&(d.value=[])}return N(x,(l,u)=>{l||l===u||(g.value=-1,i.value=!1,Z.value&&!K.value&&!d.value.some(n=>{let{value:v}=n;return v===A.value[0].value})?_(A.value[0]):e.multiple&&k.value&&_(ue(e,k.value)))}),N(i,()=>{if(!e.hideSelected&&i.value&&d.value.length){const l=A.value.findIndex(u=>d.value.some(n=>e.valueComparator(n.value,u.value)));He&&window.requestAnimationFrame(()=>{var u;l>=0&&((u=j.value)==null||u.scrollToIndex(l))})}}),N(A,(l,u)=>{x.value&&(!l.length&&e.hideNoData&&(i.value=!1),!u.length&&l.length&&(i.value=!0))}),Le(()=>{const l=!!(e.chips||r.chip),u=!!(!e.hideNoData||A.value.length||r["prepend-item"]||r["append-item"]||r["no-data"]),n=d.value.length>0,v=oe.filterProps(e);return o(oe,L({ref:V},v,{modelValue:k.value,"onUpdate:modelValue":[a=>k.value=a,t],focused:x.value,"onUpdate:focused":a=>x.value=a,validationValue:d.externalValue,counterValue:P.value,dirty:n,class:["v-combobox",{"v-combobox--active-menu":i.value,"v-combobox--chips":!!e.chips,"v-combobox--selection-slot":!!r.selection,"v-combobox--selecting-index":g.value>-1,[`v-combobox--${e.multiple?"multiple":"single"}`]:!0},e.class],style:e.style,readonly:e.readonly,placeholder:n?void 0:e.placeholder,"onClick:clear":he,"onMousedown:control":ge,onKeydown:ye}),{...r,default:()=>o(B,null,[o(Se,L({ref:G,modelValue:i.value,"onUpdate:modelValue":a=>i.value=a,activator:"parent",contentClass:"v-combobox__content",disabled:Q.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:pe},e.menuProps),{default:()=>[u&&o(qe,L({ref:X,selected:J.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:a=>a.preventDefault(),onKeydown:me,onFocusin:$,onFocusout:O,onScrollPassive:fe,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},e.listProps),{default:()=>{var a,f,h;return[(a=r["prepend-item"])==null?void 0:a.call(r),!A.value.length&&!e.hideNoData&&(((f=r["no-data"])==null?void 0:f.call(r))??o(ce,{title:I(e.noDataText)},null)),o(Ie,{ref:j,renderless:!0,items:A.value},{default:S=>{var H;let{item:y,index:M,itemRef:T}=S;const z=L(y.props,{ref:T,key:M,active:Z.value&&M===0?!0:void 0,onClick:()=>_(y,null)});return((H=r.item)==null?void 0:H.call(r,{item:y,index:M,props:z}))??o(ce,z,{prepend:ae=>{let{isSelected:ne}=ae;return o(B,null,[e.multiple&&!e.hideSelected?o(We,{key:y.value,modelValue:ne,ripple:!1,tabindex:"-1"},null):void 0,y.props.prependAvatar&&o(Oe,{image:y.props.prependAvatar},null),y.props.prependIcon&&o(ie,{icon:y.props.prependIcon},null)])},title:()=>{var ae,ne;return F.value?y.title:Je(y.title,(ae=Y(y))==null?void 0:ae.title,((ne=k.value)==null?void 0:ne.length)??0)}})}}),(h=r["append-item"])==null?void 0:h.call(r)]}})]}),d.value.map((a,f)=>{function h(T){T.stopPropagation(),T.preventDefault(),_(a,!1)}const S={"onClick:close":h,onMousedown(T){T.preventDefault(),T.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},y=l?!!r.chip:!!r.selection,M=y?Ne(l?r.chip({item:a,index:f,props:S}):r.selection({item:a,index:f})):void 0;if(!(y&&!M))return o("div",{key:a.value,class:["v-combobox__selection",f===g.value&&["v-combobox__selection--selected",C.value]],style:f===g.value?m.value:{}},[l?r.chip?o(Ue,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:a.title}}},{default:()=>[M]}):o(Ae,L({key:"chip",closable:e.closableChips,size:"small",text:a.title,disabled:a.props.disabled},S),null):M??o("span",{class:"v-combobox__selection-text"},[a.title,e.multiple&&f<d.value.length-1&&o("span",{class:"v-combobox__selection-comma"},[Be(",")])])])})]),"append-inner":function(){var S;for(var a=arguments.length,f=new Array(a),h=0;h<a;h++)f[h]=arguments[h];return o(B,null,[(S=r["append-inner"])==null?void 0:S.call(r,...f),(!e.hideNoData||e.items.length)&&e.menuIcon?o(ie,{class:"v-combobox__menu-icon",icon:e.menuIcon,onMousedown:be,onClick:Ke,"aria-label":I(te.value),title:I(te.value)},null):void 0])}})}),$e({isFocused:x,isPristine:F,menu:i,search:k,selectionIndex:g,filteredItems:W,select:_},V)}});export{al as V,nl as a};
