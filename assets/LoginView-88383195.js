import{_ as y,U as B,W as C,X as k,G as F,H as I,J as r,a2 as U,o as e,a1 as a,am as L,an as d,T as V,O as M,P as N,R as P,S as R}from"./index-4779d971.js";import{c as T,a as m,u as q,e as p,V as $}from"./index.esm-115d3317.js";import{V as A,b as _,a as D}from"./VRow-97cf97ad.js";import{V as G}from"./VDivider-759e14d2.js";const H=l=>(P("data-v-ec3c98be"),l=l(),R(),l),J=H(()=>V("h1",{class:"text-center"},"登入",-1)),O={class:"text-center"},W={__name:"LoginView",setup(l){const{api:g}=U(),b=B(),i=C(),v=k(),f=T({account:m().required("必填").min(4,"長度太短").max(20,"長度太長"),password:m().required("必填").min(4,"長度太短").max(20,"長度太長")}),{handleSubmit:w,isSubmitting:h}=q({validationSchema:f}),n=p("account"),c=p("password"),x=w(async u=>{var s,o;try{const{data:t}=await g.post("/users/login",{account:u.account,password:u.password});v.login(t.result),i({text:"登入成功",showCloseButton:!1,snackbarProps:{timeout:1500,color:"#8C8987",location:"center"}}),b.push("/")}catch(t){console.log(t);const S=((o=(s=t==null?void 0:t.response)==null?void 0:s.data)==null?void 0:o.message)||"發生錯誤，請稍後再試";i({text:S,showCloseButton:!1,snackbarProps:{timeout:1500,color:"error",location:"center"}})}});return(u,s)=>(F(),I(A,{class:"color"},{default:r(()=>[e(D,null,{default:r(()=>[e(_,{cols:"12"},{default:r(()=>[J]),_:1}),e(G),e(_,{cols:"12"},{default:r(()=>[e($,{class:"form",disabled:a(h),onSubmit:L(a(x),["prevent"])},{default:r(()=>[e(d,{class:"my-5",label:"帳號",clearable:"",variant:"outlined",maxlength:"20",minlength:"4",counter:"",modelValue:a(n).value.value,"onUpdate:modelValue":s[0]||(s[0]=o=>a(n).value.value=o),"error-messages":a(n).errorMessage.value},null,8,["modelValue","error-messages"]),e(d,{class:"my-5",label:"密碼",clearable:"",variant:"outlined",maxlength:"20",minlength:"4",counter:"",type:"password",modelValue:a(c).value.value,"onUpdate:modelValue":s[1]||(s[1]=o=>a(c).value.value=o),"error-messages":a(c).errorMessage.value},null,8,["modelValue","error-messages"]),V("div",O,[e(M,{class:"login",type:"submit"},{default:r(()=>[N("登入")]),_:1})])]),_:1},8,["disabled","onSubmit"])]),_:1})]),_:1})]),_:1}))}},K=y(W,[["__scopeId","data-v-ec3c98be"]]);export{K as default};
